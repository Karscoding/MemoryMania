<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="global.css">
    <title>Memory</title>
</head>
<body>
<a class="nav-button" id="auth-div-button" href="login.html">Login</a>
<a class="nav-button" id="settings-div-button" href="settings.html">Instellingen</a>
<div id="header">
    <h1>
        Memory Mania
    </h1>
    <div id="game-state">
        <p id="connection-test">No Connection</p>
        <p id="running-time">Verlopen tijd: 0s</p>
        <p id="found-cards">Gevonden kaart paren: 0</p>
    </div>
    <div class="progress-container">
        <div class="progress-loader">
            <div class="progress"></div>
        </div>
    </div>
</div>
<div id="board">
    <div id="grid-container">
    </div>
</div>
<div id="stats">
    <div id="leaderboard">
        <h2>Top Vijf</h2>
        <ol id="leaderboard-list">
        </ol>
    </div>
    <br>
    <p>Gemiddelde speeltijd: x:xx</p>
    <div id="settings">
        <select name="card-character" id="character-dropdown">
            <option value="*">*</option>
            <option value="+">+</option>
            <option value="-">-</option>
            <option value=":3">:3</option>
            <option value="^-^">^-^</option>
        </select>
        <select name="card-amount" id="amount-dropdown">
            <option value="2">2x2</option>
            <option value="4">4x4</option>
            <option value="6">6x6</option>
        </select>
    </div>
    <div id="color-selection">
        <div class="color-button-container">
            <label>
                Verborgen Kaart
                <input type="color" value="#99c6ff" name="closed-card-color" id="closed-card-color">
            </label>
            <label>
                Geopende Kaart
                <input type="color" value="#95ff95" name="opened-card-color" id="opened-card-color">
            </label>
            <label>
                Gevonden Kaart
                <input type="color" value="#ffaeff" name="found-card-color" id="found-card-color">
            </label>
        </div>
    </div>
    <button id="start-button" onclick="restart()">Restart</button>
</div>
<div id="win-message">
    <h1 class="win-header">You Won!</h1>
    <p class="win-text">Placeholder Text</p>
    <button id="replay-button" onclick="restart()">Restart</button>
</div>
<script src="js/card.js"></script>
<script src="js/grid.js"></script>
<script src="js/progressbar.js"></script>
<script src="js/game.js"></script>
<script src="js/index.js"></script>
<script>
    document.addEventListener('DOMContentLoaded', async function() {
        const response = await fetch('http://localhost:8000/scores');
        const scores = await response.json();

        const leaderboardList = document.getElementById('leaderboard-list');
        leaderboardList.innerHTML = '';
        console.log(response);
        console.log(scores);

        scores.sort((a, b) => b.score - a.score);

        const topScores = scores.slice(0, 5); // Get top 5 scores

        topScores.forEach(score => {
            const listItem = document.createElement('li');
            listItem.textContent = `${score.username}: ${score.score}`;
            leaderboardList.appendChild(listItem);
        });
    });
</script>
</body>
</html>
